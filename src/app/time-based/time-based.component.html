<div *ngIf="service.pageLoading">
  <app-loading></app-loading>
</div>
<div *ngIf="!service.pageLoading">
    <div class="content">
        <div class="container-fluid">
            <div class="row pt-2 mb-2">
                    <div class="col-12 mb-2">
                        <div class="text-center title">Control Plan Schedule - Time Base Maintenance for Critical Equipment</div>
                    </div>
                </div>
            <div class="row">
                <div class="col-12 mb-2">
                    <mat-accordion multi>
                        <mat-expansion-panel *ngFor="let task of MainTask" [expanded]="true">
                            <mat-expansion-panel-header>
                                <mat-panel-title>
                                    {{task.Task}}
                                </mat-panel-title>
                                <mat-panel-description>
                                    {{task.Frequency}}
                                </mat-panel-description>
                            </mat-expansion-panel-header>
                            <div class="example-container" style="overflow: auto; max-height:100%; ">
                                <table mat-table [dataSource]="task.subTasks">
                                    <ng-container matColumnDef="position">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Sr. No
                                        </th>
                                        <td mat-cell *matCellDef="let element; let i = index">
                                            <strong>{{ getSerial(i) }}</strong>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="name">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Schedule / Equipment
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <div class="important-task">{{element.Schedule_Equipment}}</div>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Responsibility">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Responsibility
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            {{element.Responsibility}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="frequency">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Frequency
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            {{element.Frequency}}
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="january">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Jan
                                        </th>
                                        <td mat-cell *matCellDef="let element">
        									<ng-container *ngIf="element.Jan === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'january')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jan === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'january')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jan === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jan === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="february">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Feb
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Feb === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'february')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Feb === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'february')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Feb === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Feb === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="march">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Mar
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Mar === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'march')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Mar === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'march')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Mar === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Mar === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="april">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Apr
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Apr === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'april')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Apr === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'april')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Apr === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Apr === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="may">
                                        <th mat-header-cell *matHeaderCellDef>
                                            May
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.May === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'may')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.May === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'may')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.May === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.May === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="june">
                                        <th mat-header-cell *matHeaderCellDef>
                                            June
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Jun === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'june')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jun === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'june')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jun === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jun === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="july">
                                        <th mat-header-cell *matHeaderCellDef>
                                            July
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Jul === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'july')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jul === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'july')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jul === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Jul === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="august">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Aug
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Aug === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'august')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Aug === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'august')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Aug === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Aug === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="september">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Sept
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Sep === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'september')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Sep === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'september')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Sep === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Sep === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="october">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Oct
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Oct === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'october')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Oct === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'october')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Oct === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Oct === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="november">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Nov
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Nov === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'november')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Nov === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'november')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Nov === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Nov === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="december">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Dec
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            <ng-container *ngIf="element.Dec === 1">
                                                <button class="button-38" role="button" style="background-color: #7be58b;" (click)="completedSucess(element, 'december')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Dec === 2">
                                                <button class="button-38" role="button" style="background-color: #a8b6f3;" (click)="complete(element, 'december')"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Dec === 3">
                                                <button class="button-38" role="button" style="background-color: #ff9b9b;"></button>
                                            </ng-container>
                                            <ng-container *ngIf="element.Dec === 4">
                                                <button class="button-38" role="button" style="background-color: #f3e7a8;"></button>
                                            </ng-container>
                                        </td>
                                    </ng-container>

                                    <ng-container matColumnDef="Comments">
                                        <th mat-header-cell *matHeaderCellDef>
                                            Comments
                                        </th>
                                        <td mat-cell *matCellDef="let element">
                                            {{element.Comments}}
                                        </td>
                                    </ng-container>
                                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                                </table>
                            </div>
                        </mat-expansion-panel>
                        
                    </mat-accordion>
                </div>
            </div>
        </div>
    </div>
</div>
